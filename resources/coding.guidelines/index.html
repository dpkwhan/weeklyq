


<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="weekly q">
      
      
        <link rel="canonical" href="https://dpkwhan.github.io/weeklyq/resources/coding.guidelines/">
      
      
        <meta name="author" content="David Han">
      
      <link rel="shortcut icon" href="../../assets/img/logo.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-5.4.0">
    
    
      
        <title>Coding Guidelines - weekly q</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.fe0cca5b.min.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/palette.a46bcfb3.min.css">
      
      
        
        
        <meta name="theme-color" content="#2196f3">
      
    
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
      <link rel="stylesheet" href="../../assets/css/extra.css">
    
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.17.1/themes/prism-solarizedlight.min.css">
    
    
      
        
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-140259656-1","auto"),ga("set","anonymizeIp",!0),ga("send","pageview"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){if(this.value){var e=document.location.pathname;ga("send","pageview",e+"?q="+this.value)}})}),document.addEventListener("DOMContentSwitch",function(){ga("send","pageview")})</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
      
    
    
  </head>
  
  
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="blue" data-md-color-accent="deep-orange">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#q-coding-guidelines" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="https://dpkwhan.github.io/weeklyq/" title="weekly q" class="md-header-nav__button md-logo" aria-label="weekly q">
      
  <img src="../../assets/img/logo.png" alt="logo">

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            weekly q
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              Coding Guidelines
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active">
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
        
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="https://dpkwhan.github.io/weeklyq/" title="weekly q" class="md-nav__button md-logo" aria-label="weekly q">
      
  <img src="../../assets/img/logo.png" alt="logo">

    </a>
    weekly q
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      2020
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="2020" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        2020
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../2020/2020.07.27/" title="2020.07.27" class="md-nav__link">
      2020.07.27
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../2020/2020.07.20/" title="2020.07.20" class="md-nav__link">
      2020.07.20
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../2020/2020.07.13/" title="2020.07.13" class="md-nav__link">
      2020.07.13
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../2020/2020.07.06/" title="2020.07.06" class="md-nav__link">
      2020.07.06
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../2020/2020.06.29/" title="2020.06.29" class="md-nav__link">
      2020.06.29
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../2020/2020.06.22/" title="2020.06.22" class="md-nav__link">
      2020.06.22
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../2020/2020.06.15/" title="2020.06.15" class="md-nav__link">
      2020.06.15
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../2020/2020.06.08/" title="2020.06.08" class="md-nav__link">
      2020.06.08
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../2020/2020.06.01/" title="2020.06.01" class="md-nav__link">
      2020.06.01
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../2020/2020.05.25/" title="2020.05.25" class="md-nav__link">
      2020.05.25
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../2020/2020.05.18/" title="2020.05.18" class="md-nav__link">
      2020.05.18
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../2020/2020.05.11/" title="2020.05.11" class="md-nav__link">
      2020.05.11
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../2020/2020.05.04/" title="2020.05.04" class="md-nav__link">
      2020.05.04
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../2020/2020.04.27/" title="2020.04.27" class="md-nav__link">
      2020.04.27
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../2020/2020.04.20/" title="2020.04.20" class="md-nav__link">
      2020.04.20
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../2020/2020.04.13/" title="2020.04.13" class="md-nav__link">
      2020.04.13
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../2020/2020.04.06/" title="2020.04.06" class="md-nav__link">
      2020.04.06
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../2020/2020.03.30/" title="2020.03.30" class="md-nav__link">
      2020.03.30
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../2020/2020.03.23/" title="2020.03.23" class="md-nav__link">
      2020.03.23
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../2020/2020.03.16/" title="2020.03.16" class="md-nav__link">
      2020.03.16
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../2020/2020.03.09/" title="2020.03.09" class="md-nav__link">
      2020.03.09
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../2020/2020.03.02/" title="2020.03.02" class="md-nav__link">
      2020.03.02
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../2020/2020.02.24/" title="2020.02.24" class="md-nav__link">
      2020.02.24
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../2020/2020.02.17/" title="2020.02.17" class="md-nav__link">
      2020.02.17
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../2020/2020.02.10/" title="2020.02.10" class="md-nav__link">
      2020.02.10
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../2020/2020.02.03/" title="2020.02.03" class="md-nav__link">
      2020.02.03
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../2020/2020.01.27/" title="2020.01.27" class="md-nav__link">
      2020.01.27
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../2020/2020.01.20/" title="2020.01.20" class="md-nav__link">
      2020.01.20
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../2020/2020.01.13/" title="2020.01.13" class="md-nav__link">
      2020.01.13
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../2020/2020.01.06/" title="2020.01.06" class="md-nav__link">
      2020.01.06
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3" checked>
    
    <label class="md-nav__link" for="nav-3">
      Resources
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Resources" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        Resources
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Coding Guidelines
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 9h14V7H3v2m0 4h14v-2H3v2m0 4h14v-2H3v2m16 0h2v-2h-2v2m0-10v2h2V7h-2m0 6h2v-2h-2v2z"/></svg>
        </span>
      </label>
    
    <a href="./" title="Coding Guidelines" class="md-nav__link md-nav__link--active">
      Coding Guidelines
    </a>
    
      
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#table-of-contents" class="md-nav__link">
    Table of Contents
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    Introduction
  </a>
  
    <nav class="md-nav" aria-label="Introduction">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#acknowledgements" class="md-nav__link">
    Acknowledgements
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#motivation" class="md-nav__link">
    Motivation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#q-coding-goals" class="md-nav__link">
    Q coding goals
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#file-names" class="md-nav__link">
    File Names
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#file-organisation" class="md-nav__link">
    File Organisation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#naming-conventions" class="md-nav__link">
    Naming Conventions
  </a>
  
    <nav class="md-nav" aria-label="Naming Conventions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#rules" class="md-nav__link">
    Rules
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#size-does-matter" class="md-nav__link">
    Size does Matter
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reserve-x-y-z" class="md-nav__link">
    Reserve x, y, z
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#indentation" class="md-nav__link">
    Indentation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#comments" class="md-nav__link">
    Comments
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#declarations" class="md-nav__link">
    Declarations
  </a>
  
    <nav class="md-nav" aria-label="Declarations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#curly-braces-and-functions" class="md-nav__link">
    Curly Braces and Functions
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#function-shape" class="md-nav__link">
    Function shape
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#function-length" class="md-nav__link">
    Function length
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#function-parameters" class="md-nav__link">
    Function Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#function-arguments" class="md-nav__link">
    Function Arguments
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#assignments" class="md-nav__link">
    Assignments
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#anonymous-functions" class="md-nav__link">
    Anonymous Functions
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#statements" class="md-nav__link">
    Statements
  </a>
  
    <nav class="md-nav" aria-label="Statements">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parentheses" class="md-nav__link">
    Parentheses
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#white-space" class="md-nav__link">
    White Space
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#programming-practices" class="md-nav__link">
    Programming Practices
  </a>
  
    <nav class="md-nav" aria-label="Programming Practices">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#avoid-iffy-and-loopy-code" class="md-nav__link">
    Avoid Iffy and Loopy Code
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#projections" class="md-nav__link">
    Projections
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#verbs-vs-functions" class="md-nav__link">
    Verbs vs Functions
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#conditionals" class="md-nav__link">
    Conditionals
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#globals" class="md-nav__link">
    Globals
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#function-libraries" class="md-nav__link">
    Function Libraries
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#indexing-and-evaluation" class="md-nav__link">
    Indexing and Evaluation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#readability" class="md-nav__link">
    Readability
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../slippage.decomposition/" title="Slippage Decomposition" class="md-nav__link">
      Slippage Decomposition
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../kdb.notes/" title="Kdb/q Notes" class="md-nav__link">
      Kdb/q Notes
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#table-of-contents" class="md-nav__link">
    Table of Contents
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    Introduction
  </a>
  
    <nav class="md-nav" aria-label="Introduction">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#acknowledgements" class="md-nav__link">
    Acknowledgements
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#motivation" class="md-nav__link">
    Motivation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#q-coding-goals" class="md-nav__link">
    Q coding goals
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#file-names" class="md-nav__link">
    File Names
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#file-organisation" class="md-nav__link">
    File Organisation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#naming-conventions" class="md-nav__link">
    Naming Conventions
  </a>
  
    <nav class="md-nav" aria-label="Naming Conventions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#rules" class="md-nav__link">
    Rules
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#size-does-matter" class="md-nav__link">
    Size does Matter
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reserve-x-y-z" class="md-nav__link">
    Reserve x, y, z
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#indentation" class="md-nav__link">
    Indentation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#comments" class="md-nav__link">
    Comments
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#declarations" class="md-nav__link">
    Declarations
  </a>
  
    <nav class="md-nav" aria-label="Declarations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#curly-braces-and-functions" class="md-nav__link">
    Curly Braces and Functions
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#function-shape" class="md-nav__link">
    Function shape
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#function-length" class="md-nav__link">
    Function length
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#function-parameters" class="md-nav__link">
    Function Parameters
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#function-arguments" class="md-nav__link">
    Function Arguments
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#assignments" class="md-nav__link">
    Assignments
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#anonymous-functions" class="md-nav__link">
    Anonymous Functions
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#statements" class="md-nav__link">
    Statements
  </a>
  
    <nav class="md-nav" aria-label="Statements">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#parentheses" class="md-nav__link">
    Parentheses
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#white-space" class="md-nav__link">
    White Space
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#programming-practices" class="md-nav__link">
    Programming Practices
  </a>
  
    <nav class="md-nav" aria-label="Programming Practices">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#avoid-iffy-and-loopy-code" class="md-nav__link">
    Avoid Iffy and Loopy Code
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#projections" class="md-nav__link">
    Projections
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#verbs-vs-functions" class="md-nav__link">
    Verbs vs Functions
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#conditionals" class="md-nav__link">
    Conditionals
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#globals" class="md-nav__link">
    Globals
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#function-libraries" class="md-nav__link">
    Function Libraries
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#indexing-and-evaluation" class="md-nav__link">
    Indexing and Evaluation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#readability" class="md-nav__link">
    Readability
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                  
                
                
                <h1 id="q-coding-guidelines">Q Coding Guidelines<a class="headerlink" href="#q-coding-guidelines" title="Permanent link">&para;</a></h1>
<p>This is copied from <a href="https://github.com/finos/kdb/blob/master/enterprise-best-practices/q-coding-guidelines.md">here</a>.</p>
<h2 id="table-of-contents">Table of Contents<a class="headerlink" href="#table-of-contents" title="Permanent link">&para;</a></h2>
<ol>
<li><a href="#introduction">Introduction</a></li>
<li><a href="#file-names">File Names</a></li>
<li><a href="#file-organisation">File Organisation</a></li>
<li><a href="#naming-conventions">Naming Conventions</a></li>
<li><a href="#indentation">Indentation</a></li>
<li><a href="#comments">Comments</a></li>
<li><a href="#declarations">Declarations</a></li>
<li><a href="#statements">Statements</a></li>
<li><a href="#white-space">White Space</a></li>
<li><a href="#programming-practices">Programming Practices</a></li>
</ol>
<h2 id="introduction">Introduction<a class="headerlink" href="#introduction" title="Permanent link">&para;</a></h2>
<p>This is a collection of guidelines and best practices for <code>q</code>.</p>
<p>Why have code conventions? It should be clear that readability of code
is essential for code maintainability. This applies to all software
languages, but becomes even more important in languages with such high
density of notation as <code>q</code>.</p>
<h3 id="acknowledgements">Acknowledgements<a class="headerlink" href="#acknowledgements" title="Permanent link">&para;</a></h3>
<p>This initial release of these guidelines are based on notes and training
materials authored by Jeff Borror, Charlie Skelton's (kx.com) guidelines
and Stevan Apter's <a href="http://www.nsl.com/papers/style.pdf">Remarks on Style</a>.</p>
<h3 id="motivation">Motivation<a class="headerlink" href="#motivation" title="Permanent link">&para;</a></h3>
<ul>
<li>Code is:<ul>
<li>written once</li>
<li>modified 10 times</li>
<li>read 100 times</li>
</ul>
</li>
<li>Write for those who come after you</li>
</ul>
<h3 id="q-coding-goals">Q coding goals<a class="headerlink" href="#q-coding-goals" title="Permanent link">&para;</a></h3>
<ul>
<li>short vs simple:<ul>
<li>Simple problems usually have simple solutions in q</li>
<li>Fewer operators often but not always means simpler and better</li>
<li>Code count should not be the primary metric of q code goodness</li>
</ul>
</li>
<li>Q coding strategy:<ul>
<li><em>Find a solution that works, then look for simpler solutions. If
    performance is critical, test and pick the solution with the
    quickest execution.</em></li>
</ul>
</li>
<li>Go with the flow:<ul>
<li>Use data constructs and idioms of <code>q</code></li>
<li>Do not impose constructs from other languages</li>
<li>Use vector operations whenever reasonable</li>
<li>Do not make your q code look like: C, Java, Perl, SQL, or ...</li>
</ul>
</li>
</ul>
<h2 id="file-names">File Names<a class="headerlink" href="#file-names" title="Permanent link">&para;</a></h2>
<ul>
<li>suffixes: <code>q</code> scripts must have the <code>.q</code> extension</li>
<li>names: <code>q</code> scripts should use alphanumeric names without whitespace</li>
</ul>
<h2 id="file-organisation">File Organisation<a class="headerlink" href="#file-organisation" title="Permanent link">&para;</a></h2>
<ul>
<li>beginning comments: use a comment block that lists Perforce keywords
    for filename, version, date and author info as well as a copyright
    notice</li>
<li>for batch processes, define a main function and invoke via protected
    evaluation to exit with a suitable return code (kdb always
    returns 0)</li>
</ul>
<pre><code>main:{[parms]
  / body of script
  }
@[main;parms;{.finos.log.error &quot;Error: &quot;,x;exit 1}];
exit 0;
</code></pre>

<h2 id="naming-conventions">Naming Conventions<a class="headerlink" href="#naming-conventions" title="Permanent link">&para;</a></h2>
<ul>
<li>names should be easy to type and read</li>
<li><strong>avoid</strong> underscores <code>_</code>
    in names and expressions<ul>
<li><code>_</code> is an operator so names containing it can confuse the reader</li>
<li><strong><em>avoid</em></strong> names like
    <code>accident_wating_to_happen_</code></li>
</ul>
</li>
<li>use camel case or all lower case for multiple word identifiers<ul>
<li><code>longFunctionName</code> or <code>longfunctionname</code></li>
</ul>
</li>
<li>use namespaces judiciously (see <a href="#function-libraries">function libraries</a>)</li>
<li>don't use <code>.</code> in names, as this looks like a namespace but its
    validity is actually a parser bug, future versions of KDB+ may not
    support variables with <code>.</code> 's in.<ul>
<li><strong>Do</strong> <code>.myspace.myvar</code></li>
<li><strong><em>Don't</em></strong> <code>myspace.myvar</code></li>
</ul>
</li>
</ul>
<h3 id="rules">Rules<a class="headerlink" href="#rules" title="Permanent link">&para;</a></h3>
<ul>
<li>Global constants (read-only) are descriptive nouns in all capitals<ul>
<li><code>PORT</code></li>
</ul>
</li>
<li>Global variables (read/write - <em>avoid these if at
    all possible</em>) are descriptive nouns starting with an
    initial capital<ul>
<li><code>Global</code></li>
</ul>
</li>
<li>Global functions are descriptive lower or camel case verbs<ul>
<li><code>updatetrade</code> or <code>updateTrade</code></li>
</ul>
</li>
<li>Local functions are short lower case verbs<ul>
<li><code>upd</code></li>
</ul>
</li>
<li>Local variables are short lower case nouns. Reserve <code>x</code>,<code>y</code>,<code>z</code> for
    positional parameters. <code>q</code> often uses the following conventions:<ul>
<li><code>d</code> dictionary/date</li>
<li><code>v</code> vector</li>
<li><code>t</code> table</li>
<li><code>f</code> file/function</li>
<li><code>x</code>,<code>y</code>,<code>z</code> implicit function parameters</li>
<li><code>n</code> count</li>
<li><code>i</code> fabricated on demand during a query</li>
<li><code>h</code> handle</li>
<li><code>l</code> never use letter <code>l</code>, looks like number <code>1</code> in some fonts
    (<em>looks identical on this wiki</em>)</li>
<li><code>s</code> symbol</li>
</ul>
</li>
</ul>
<h3 id="size-does-matter">Size does Matter<a class="headerlink" href="#size-does-matter" title="Permanent link">&para;</a></h3>
<ul>
<li>names that are too short are difficult to associate and search</li>
<li>names that are too long are time consuming to type/read and are
    prone to errors</li>
<li>names that are difficult to pronounce will be transcribed
    incorrectly</li>
<li>use criterion: <em>can the guy on the other end of the telephone type
    what i'm saying easily?</em></li>
</ul>
<h3 id="reserve-x-y-z">Reserve x, y, z<a class="headerlink" href="#reserve-x-y-z" title="Permanent link">&para;</a></h3>
<ul>
<li>Use <code>x</code>,<code>y</code>,<code>z</code> to refer only to the first, second and third functional
    arguments</li>
<li>If you use other names for parameters <strong><em>do not</em></strong> use <code>x</code>,<code>y</code>,<code>z</code> as local variables</li>
</ul>
<h2 id="indentation">Indentation<a class="headerlink" href="#indentation" title="Permanent link">&para;</a></h2>
<ul>
<li>Consistently indent two spaces in functions or control structures.</li>
<li>Use indentation to delineate nested control structures if you must
    have them.</li>
<li>Align:<ul>
<li>list items</li>
<li>dictionary domain/range</li>
<li>case statements</li>
<li>table columns</li>
<li>other obvious candidates in multi-line parallel constructs</li>
</ul>
</li>
</ul>
<pre><code>trade:([]
  time:`time$();
  sym:`g#`symbol$();
  msg:`symbol$();   / original IDN message type
  tp:`float$();     / last trade price or value
  ts:`int$();       / trade volume
  tts:`long$();     / today's total trading volume
  smi:`symbol$();   / sub-market indicator
  te:`symbol$();    / trade exchange id
  tc:`symbol$();    / price type/condition
  tte:`symbol$();   / trade through exempt
  sq:`int$()        / sequence number
  );
</code></pre>

<ul>
<li><em>Gotcha</em>: ensure
    that a closing brace for a function split over several lines
    is indented.<ul>
<li>to avoid this keep the closing brace with the last line of
    the function.</li>
</ul>
</li>
</ul>
<pre><code>// Generate n (int) random trades for symbols in s (symbol list), starting at st (time).
// Return the table.
genTrades:{[n;s;st]
  dur:8*60*60*1000; / 8 hours
  / generate and sort data
  `sym`time xasc ([] time:st+n?dur; sym:n?s; tp:25+n?50f; ts:100+100*n?100; oid:(n;10)#(10*n)?.Q.an)
} / this breaks code
</code></pre>

<p>instead write the function:</p>
<pre><code>// Generate n (int) random trades for symbols in s (symbol list), starting at st (time).
// Return the table.
genTrades:{[n;s;st]
  dur:8*60*60*1000; / 8 hours
  / generate and sort data
  `sym`time xasc ([] time:st+n?dur; sym:n?s; tp:25+n?50f; ts:100+100*n?100; oid:(n;10)#(10*n)?.Q.an)}
</code></pre>

<h2 id="comments">Comments<a class="headerlink" href="#comments" title="Permanent link">&para;</a></h2>
<ul>
<li>Every line of q code should be commented. This might sound like
    overkill but remember that this is primarily for others, not
    for you. Reading other people's code is much easier when succinct,
    relevant comments are provided. Other languages don't require per
    line comments but a single line of q can do a lot...</li>
<li>If you write short lines place the comments at the end of the line
    and align them</li>
</ul>
<pre><code>d:k!key each` sv'`,'k:(key`) except `q`Q`h`help / dictionary mapping all non system namespaces to their contents
</code></pre>

<ul>
<li>If you have longer lines place the comment on the
    line before(logically) the code</li>
<li>Use function header comments:<ul>
<li>especially for non-trivial functions</li>
<li>describe purpose of function</li>
<li>describe expected values and forms of arguments</li>
<li>describe any return value(s)</li>
</ul>
</li>
<li>Use extra comment lines to explain<ul>
<li>meaning or purpose of local variables</li>
<li>any side effects (i.e. non-local references)</li>
<li>the working of a control structure and its condition(s)</li>
</ul>
</li>
<li>Block comments:<ul>
<li><strong>do use</strong> <code>//</code> to
    start each line</li>
<li><strong><em>avoid</em></strong> the <code>\</code>,
    <code>/</code> block comment pair</li>
<li>it is easy to leave a dangling <code>\</code> on a line which will ignore
    all code</li>
</ul>
</li>
</ul>
<p>Compare this:</p>
<pre><code>// Adds a new column to existing table.
// Arguments:
// dbdir : Path to database (as path symbol)
// table : Table name to be modified (as symbol)
// colname : Column name to be added (as symbol)
// defaultvalue: Default value for the new column
// Example:
// Adding a new column named noo to trade table with default value of 0h
// .finos.dba.addCol[`:.;`trade;`noo;0h]
.finos.dba.addCol:{[dbdir;table;colname;defaultvalue]
</code></pre>

<p>with this:</p>
<pre><code>/
Adds a new column to existing table.
Arguments:
dbdir : Path to database (as path symbol)
table : Table name to be modified (as symbol)
colname : Column name to be added (as symbol)
defaultvalue: Default value for the new column
Example:
Adding a new column named noo to trade table with default value of 0h
.finos.dba.addCol[`:.;`trade;`noo;0h]
\
.finos.dba.addCol:{[dbdir;table;colname;defaultvalue]
</code></pre>

<h2 id="declarations">Declarations<a class="headerlink" href="#declarations" title="Permanent link">&para;</a></h2>
<h3 id="curly-braces-and-functions">Curly Braces and Functions<a class="headerlink" href="#curly-braces-and-functions" title="Permanent link">&para;</a></h3>
<ul>
<li>A function of one statement should be written on a single line</li>
<li>If reasonable, a function that returns an explicit result should
    have the result isolated with the closing brace</li>
</ul>
<pre><code>// splay table to partition
// splay table t (passed by name), into directory d (hsym), enum file e (sym),
// and partition p (simple type like date). Sort the table according to column f (sym).
// return the table.
splaytable:{[d;e;p;f;t]
  if[not all .Q.qm each r:flip .sys.en[d;e]`. t;'`unmappable];       / enumerate all symbol columns
  {[d;t;i;x] @[d;x;:;t[x]i]}[d:.Q.par[d;p;t];r;iasc r f] each key r; / sort data by f (sym) column
  @[;f;`p#]@[d;`.d;:;f,(r:key r) except f];                          / write table to disk and apply `p#
  t}
</code></pre>

<ul>
<li>Functions that return no meaningful result should end with an
    isolated brace</li>
</ul>
<pre><code>// log message to stderr: message header (x string) and an atom or list to log.
logmessage:{[x;y] y,:(); s:{$[10h=type x;x;string x]};
  -2 s[x],&quot;: &quot;,ys[0],/,&quot;,/:1_ys:$[10h=type y;enlist y;s each y];
  } / no return result
</code></pre>

<ul>
<li><em>Gotcha</em>: beware an
    unintended <code>;</code> before a closing brace it will result in no return
    value</li>
</ul>
<pre><code>generatetable:{[n] ([]sym:n?`3; tp:25+n?50f; ts:100*1+n?10);} / returns nothing
</code></pre>

<h3 id="function-shape">Function shape<a class="headerlink" href="#function-shape" title="Permanent link">&para;</a></h3>
<ul>
<li><em>Ideally, a physical line of code contains exactly one statement and
    one statement encodes one thought</em> (S. Apter)</li>
<li>A function whose code looks tall and skinny may be breaking the
    problem into chunks that are too small</li>
<li>A function that is short and fat may be breaking the problem into
    chunks that are too big</li>
<li>A line should rarely exceed 50 characters including spaces</li>
</ul>
<h3 id="function-length">Function length<a class="headerlink" href="#function-length" title="Permanent link">&para;</a></h3>
<ul>
<li>A function over ten lines is suspect</li>
<li>A function over twenty five lines is certifiable</li>
</ul>
<h3 id="function-parameters">Function Parameters<a class="headerlink" href="#function-parameters" title="Permanent link">&para;</a></h3>
<ul>
<li>Q is limited to 8 function parameters</li>
<li>Try to limit your own functions to less</li>
<li>Encapsulate complex arguments in q data structures<ul>
<li>list</li>
<li>dictionary</li>
<li>table</li>
</ul>
</li>
</ul>
<h3 id="function-arguments">Function Arguments<a class="headerlink" href="#function-arguments" title="Permanent link">&para;</a></h3>
<ul>
<li>Think carefully about what value and form of arguments you accept</li>
<li>Consider the behavior of your function for bad input<ul>
<li>functions that form public API benefit from type checking of
    input</li>
</ul>
</li>
<li>If it receives unexpected argument values or types<ul>
<li>Signal is OK</li>
<li>Returning null is OK</li>
<li>Returning invalid results is not</li>
</ul>
</li>
</ul>
<h3 id="assignments">Assignments<a class="headerlink" href="#assignments" title="Permanent link">&para;</a></h3>
<ul>
<li>Assignments within a line should be:<ul>
<li>few</li>
<li>short</li>
<li>used only in that line</li>
</ul>
</li>
<li>Longer assignments or ones used on multiple lines should be:<ul>
<li>factored onto separate lines</li>
</ul>
</li>
<li>Pick a few letters for temporary assignment and use them
    consistently<ul>
<li><strong><em>don’t use</em></strong> <code>x</code>, <code>y</code> , <code>z</code></li>
</ul>
</li>
<li>Think of values instead variables<ul>
<li>Assigned once</li>
<li>Read-only thereafter</li>
<li>Exception: can reuse one local to avoid duplicate storage for
    very large items</li>
</ul>
</li>
</ul>
<h3 id="anonymous-functions">Anonymous Functions<a class="headerlink" href="#anonymous-functions" title="Permanent link">&para;</a></h3>
<ul>
<li>Use sparingly<ul>
<li>no more than one per line</li>
</ul>
</li>
<li>Keep them short</li>
</ul>
<h2 id="statements">Statements<a class="headerlink" href="#statements" title="Permanent link">&para;</a></h2>
<h3 id="parentheses">Parentheses<a class="headerlink" href="#parentheses" title="Permanent link">&para;</a></h3>
<ul>
<li>Do not use unnecessary parentheses<ul>
<li>The compiler doesn't need them</li>
<li>They confuse experienced q coders</li>
</ul>
</li>
</ul>
<p>Compare this:</p>
<pre><code>camelCase:{[s] s[0],/{(upper 1#x),1_x,()} each 1_s} / camel case a list of strings
</code></pre>

<p>with this: <strong><em>confusing parentheses</em></strong></p>
<pre><code>camelCase:{[s] s[0],/{(upper (1#x)),(1_x),()} each (1_s)} / camel case a list of strings
</code></pre>

<ul>
<li>In expressions, only use parentheses around a complex left operand
    <code>(...) op ...</code></li>
</ul>
<pre><code>-1 &quot;result: &quot;,(string floor a*100),&quot;%&quot;;
</code></pre>

<ul>
<li>Learn to rearrange expression elements to avoid parentheses<ul>
<li><strong><em>avoid</em></strong>
    <code>(count t) &gt; 0</code></li>
<li><strong>use instead</strong>
    <code>0&lt;count t</code></li>
</ul>
</li>
<li>For monadic functions, use stronger binding brackets to avoid
    parentheses<ul>
<li><strong><em>avoid</em></strong>
    <code>"a=",(string a),", b=",string b</code></li>
<li><strong>use instead</strong>
    <code>"a=",string[a],", b=",string b</code></li>
</ul>
</li>
</ul>
<p><strong><em>Avoid</em></strong> parentheses <code>()</code>
containing statements on multiple lines, as these will be executed
bottom to top, returning a list containing the result of each statement</p>
<pre><code>//calculate netpay after income tax (if uk, then after national insurance contributions)
cntry:`uk
threshold:500
gross:1000
INCOMETAXRATE:0.2
(1-INCOMETAXRATE)*$[cntry~`uk;
 ((gross-threshold)-NI;
  NI: gross*NIRATE;
  NIRATE:0.11);
 gross]
</code></pre>

<p><strong>use brackets[] instead</strong> for normal top to bottom behaviour,
returning the result of the last statement</p>
<pre><code>//calculate netpay after income tax (if uk, then after national insurance contributions)
(1-INCOMETAXRATE)*$[cntry~`uk;
 [NIRATE:0.11;
  NI: gross*NIRATE;
  (gross-threshold)-NI];
 gross]
</code></pre>

<h2 id="white-space">White Space<a class="headerlink" href="#white-space" title="Permanent link">&para;</a></h2>
<ul>
<li>Make sure to use whitespace where required<ul>
<li>avoid it where prohibited</li>
</ul>
</li>
</ul>
<p><strong>just enough</strong> whitespace:</p>
<pre><code>fileExists:{[x] not()~key hsym`$x}
</code></pre>

<p><strong><em>unnecessary</em></strong> whitespace:</p>
<pre><code>fileExists: {[x] not () ~ key hsym ` $ x}
</code></pre>

<ul>
<li>Use a blank after <code>;</code> separators<ul>
<li>in functions and control statements</li>
</ul>
</li>
</ul>
<pre><code>s:(),s; @[s; where 10=type each s; $[`;]] / convert strings to symbols
</code></pre>

<ul>
<li>Use non-required blanks<ul>
<li>only to separate symbolic operators from operands in complex
    expressions</li>
</ul>
</li>
<li><strong><em>Do not use blanks around every operator</em></strong></li>
</ul>
<h2 id="programming-practices">Programming Practices<a class="headerlink" href="#programming-practices" title="Permanent link">&para;</a></h2>
<h3 id="avoid-iffy-and-loopy-code">Avoid Iffy and Loopy Code<a class="headerlink" href="#avoid-iffy-and-loopy-code" title="Permanent link">&para;</a></h3>
<ul>
<li>Use conditionals sparingly and correctly</li>
<li>Seek a single expression that handles main and edge cases</li>
</ul>
<p>Example: code below handles chars and strings</p>
<pre><code>s:(),s; @[s; where 10=type each s; $[`;]] / convert strings to symbols
</code></pre>

<ul>
<li>Learn all the adverbs and use them</li>
</ul>
<pre><code>1 ` sv &quot;out: &quot; ,/: string til 3; / print list of 3 ints
</code></pre>

<ul>
<li>Use do/while only while waiting on input</li>
<li>Do not hide stinking loops in each</li>
</ul>
<p><strong><em>don't do this:</em></strong></p>
<pre><code>a:til 10; {$[x&lt;5;0N;x]} each a
</code></pre>

<p><strong>instead do this:</strong></p>
<pre><code>a: til 10; @[a; where a&lt;5; :; 0N]
</code></pre>

<h3 id="projections">Projections<a class="headerlink" href="#projections" title="Permanent link">&para;</a></h3>
<ul>
<li>retain semicolons in projections to make the intent clear</li>
</ul>
<p><strong><em>don't do this:</em></strong></p>
<pre><code>f[x] .' L; / what's the valence of f ?
</code></pre>

<p><strong>instead do this:</strong></p>
<pre><code>f[x;;] .' L; / aha! f takes three params of which last two are elided
</code></pre>

<h3 id="verbs-vs-functions">Verbs vs Functions<a class="headerlink" href="#verbs-vs-functions" title="Permanent link">&para;</a></h3>
<ul>
<li>Use the verb form when practical</li>
<li>Do not use dyadic form just to make your code more concise</li>
</ul>
<h3 id="conditionals">Conditionals<a class="headerlink" href="#conditionals" title="Permanent link">&para;</a></h3>
<ul>
<li>Use ternary <code>$[; ; ]</code> whenever a result is returned<ul>
<li>There should be an assignment to its left</li>
<li>Avoid side effects</li>
</ul>
</li>
<li>Use <code>if[  ; ... ]</code> when you want side effects<ul>
<li>For example, to set multiple variables</li>
</ul>
</li>
<li>Use if for signal</li>
<li>Use extended <code>$[; ; ; ... ; ]</code> for "case"</li>
</ul>
<h3 id="globals">Globals<a class="headerlink" href="#globals" title="Permanent link">&para;</a></h3>
<ul>
<li>Minimize use and number of globals</li>
<li>Read-only global variables are safe</li>
<li>Keep mutable global data in root context<ul>
<li>Allows simple checkpoint via context save/load</li>
</ul>
</li>
<li>Factor update of globals so that each is updated by a "setter"
    function<ul>
<li>Makes trapping changes easy</li>
</ul>
</li>
</ul>
<h3 id="function-libraries">Function Libraries<a class="headerlink" href="#function-libraries" title="Permanent link">&para;</a></h3>
<ul>
<li>Be aware of the contexts you use to avoid clashes with other
    libraries<ul>
<li>any single letter namespace, and specifically <code>.q</code> and <code>.Q</code>, are
    reserved by Kx</li>
</ul>
</li>
<li>Use contexts to create libraries to separate from main context for
    session work</li>
<li>Use a different context to separate implementation from API</li>
<li>Implement each library in a script</li>
<li>Global variable references in functions are bound to the current
    context when the function is defined</li>
<li>Example of a function library:<ul>
<li><code>.finos.log</code> is the API context</li>
<li><code>.finos.log.priv</code> is the private implementation context</li>
<li>all functions are defined inside <code>.finos.log</code></li>
<li>implementation functions are defined explicitly as
    <code>.finos.log.priv.funcname</code></li>
</ul>
</li>
</ul>
<pre><code>\d .finos
// Implementation and globals
.finos.log.priv.LEVELS:`emergency`alert`critical`error`warning`notice`info`debug;
.finos.log.priv.h:0;
.finos.log.priv.logMsg:{[p;m] ... }
// Public API
.finos.log.init:{[x] ... }
.finos.log.setLogLevel:{[x] ... }
.finos.log.getLogLevel:{...}
</code></pre>

<h3 id="indexing-and-evaluation">Indexing and Evaluation<a class="headerlink" href="#indexing-and-evaluation" title="Permanent link">&para;</a></h3>
<ul>
<li>Juxtaposition reduces notational density - use it where appropriate</li>
</ul>
<p>Example:</p>
<pre><code>sums[til[10]] / difficult to read
sums til 10   / clear and precise
</code></pre>

<ul>
<li>Verb <code>@</code> and <code>.</code> can make things simpler<ul>
<li>use them judiciously</li>
</ul>
</li>
</ul>
<p>Example:</p>
<pre><code>// @ used for functional composition
flip (ts;(count value@) each ts:tables`) / list of table names and their sizes
</code></pre>

<ul>
<li>Sometimes you just have to use function <code>@</code> and <code>.</code><ul>
<li>avoid several complex arguments</li>
</ul>
</li>
</ul>
<p>Example:</p>
<pre><code>@[`.;tables[];0#]; / clear all tables
</code></pre>

<h3 id="readability">Readability<a class="headerlink" href="#readability" title="Permanent link">&para;</a></h3>
<ul>
<li>Avoid passing null symbol <code>`</code> as an argument to a functions, use
    <code>[]</code> instead. This makes it more obvious to the reader that you are
    calling the function with no arguments.</li>
</ul>
<p><strong><em>avoid</em></strong></p>
<pre><code>tables`
</code></pre>

<p><strong>use instead</strong></p>
<pre><code>tables[]
</code></pre>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid" aria-label="Footer">
        
          <a href="../../2020/2020.01.06/" title="2020.01.06" class="md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
            </div>
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                2020.01.06
              </div>
            </div>
          </a>
        
        
          <a href="../slippage.decomposition/" title="Slippage Decomposition" class="md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Slippage Decomposition
              </div>
            </div>
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2020 David Han. A written permission is required for reproduction.
          </div>
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
  <div class="md-footer-social">
    
      
      
        
        
      
      <a href="https://github.com/dpkwhan/weeklyq" target="_blank" rel="noopener" title="github.com" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
      </a>
    
      
      
        
        
      
      <a href="https://www.linkedin.com/in/zhaohuihan/" target="_blank" rel="noopener" title="www.linkedin.com" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/></svg>
      </a>
    
  </div>

    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/vendor.d710d30a.min.js"></script>
      <script src="../../assets/javascripts/bundle.b39636ac.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script>
      
      <script>
        app = initialize({
          base: "../..",
          features: [],
          search: Object.assign({
            worker: "../../assets/javascripts/worker/search.a68abb33.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML"></script>
      
        <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
      
        <script src="https://tracker.mrpfd.com/tracker.js"></script>
      
        <script src="https://use.fontawesome.com/releases/v5.2.0/js/all.js"></script>
      
        <script src="../../assets/js/theme.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.4.0/clipboard.min.js"></script>
      
        <script src="../../assets/js/prism.js"></script>
      
    
  </body>
</html>